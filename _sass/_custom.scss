/* ====== Publications: 2-column layout (content | wider TOC) ====== */
#main.with-toc {
  display: grid !important;
  grid-template-columns: minmax(0, 6.5fr) minmax(360px, 3.5fr); /* ~65% | ~35% (TOC wider) */
  gap: 1.25rem;
  align-items: start;
  box-sizing: border-box;
}

/* Hide left sidebar on this page to keep it truly 2 columns */
#main.with-toc > .sidebar { display: none !important; }

/* Neutralize theme floats/widths inside this layout */
#main.with-toc > .archive,
#main.with-toc > .toc--right {
  float: none !important;
  width: auto !important;
  max-width: none !important;
  margin: 0 !important;
  min-width: 0;
}

/* Right column behavior */
#main.with-toc > .archive { grid-column: 1; }
#main.with-toc > .toc--right {
  grid-column: 2;
  justify-self: end;                /* hug the right edge */
  position: sticky;
  top: 6rem;
  max-height: calc(100vh - 6rem);
  overflow: auto;
  padding-left: 0.75rem;
  border-left: 1px solid #e0e0e0;
}

/* ====== TOC typography: smaller, tidy, no ALL-CAPS ====== */
.toc--right, .toc__title, .toc__list, .toc__list a,
.toc__title-text, .toc__status, .toc__dash { text-transform: none !important; }

/* Set a smaller base for the whole TOC (titles, numbers, links inherit) */
.toc--right { font-size: 0.78rem; line-height: 1.3; }   /* tweak: 0.76–0.80rem if you like */

.toc__title   { font-size: 1.0em; margin: 0.25rem 0 0.5rem; }  /* ≈ 0.78rem */
.toc__section { font-size: 0.95em; margin: 0.6rem 0 0.25rem; opacity: 0.85; }

/* Keep numeric marker outside and aligned with the TITLE (not the pill) */
.toc__list {
  margin: 0;
  padding-left: 1.2rem;                 /* space for 1., 2., … */
  list-style: decimal outside;
}
.toc__list li { margin: 0 0 0.35rem; }

/* Align title + pill on the same baseline; allow nice wrapping */
.toc__list a {
  display: inline-flex;
  align-items: baseline;
  gap: 0.35rem;
  font-size: 1em !important;            /* inherit from .toc--right */
  line-height: 1.28;
  text-decoration: none;
  overflow-wrap: anywhere;               /* break long titles cleanly */
}
.toc__list a:hover { text-decoration: underline; }

.toc__title-text { font-weight: 600; }
.toc__dash       { opacity: 0.8; }

/* Mini status pill in TOC (matches main pill, just smaller) */
.pub__status--mini {
  display: inline-block;
  font-size: 0.85em;                    /* scales with TOC base (≈ 0.66rem) */
  font-weight: 700;
  padding: 0.12em 0.5em;
  border-radius: 999px;
  line-height: 1;
  background: #f1f3f5;
  color: #333;
  border: 1px solid #d0d5da;
  vertical-align: baseline;
}

/* ====== Main publication list (unchanged) ====== */
.archive .archive__item {
  border-bottom: 2px solid #cfd8dc;
  padding-bottom: 1rem;
  margin-bottom: 1.25rem;
}
.archive .archive__item:last-child { border-bottom: 0; }

.pub__meta { display: flex; align-items: baseline; flex-wrap: wrap; gap: 0.35rem; }
.pub__dash { opacity: 0.7; }
.pub__venue { font-size: 0.95rem; color: #555; }
.pub__year  { font-size: 0.95rem; color: #666; }
.pub__dot   { color: #aaa; }

.pub__status {
  display: inline-block;
  font-size: 0.78rem;
  font-weight: 700;
  padding: 0.18em 0.6em;
  border-radius: 999px;
  line-height: 1;
  background: #f1f3f5;
  color: #333;
  border: 1px solid #d0d5da;
}

.pub__footer { margin-top: 0.5rem; display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap; }
.pub__link { font-weight: 600; text-decoration: none; border-bottom: 1px solid transparent; }
.pub__link:hover { text-decoration: underline; }

/* ====== Mobile: stack ====== */
@media (max-width: 980px) {
  #main.with-toc {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  #main.with-toc > .toc--right {
    border-left: 0;
    border-top: 1px solid #e0e0e0;
    padding-top: 1rem;
    max-height: none;
    justify-self: stretch;
  }
}

/* ===== Smaller status text (main list + TOC) ===== */

/* Main list pill — smaller text + slightly tighter padding */
.pub__status {
  font-size: 0.70rem;        /* was ~0.78rem */
  padding: 0.14em 0.50em;    /* slimmer pill */
  line-height: 1;            /* keeps height compact */
}

/* TOC mini pill — scales with .toc--right's base font */
.toc--right .pub__status--mini {
  font-size: 0.5em;         /* smaller than before (relative to TOC base) */
  padding: 0.10em 0.45em;
  line-height: 0.8;
}

/* If you ever render fallback plain-text status in TOC */
.toc--right .toc__status {
  font-size: 0.5em;          /* smaller than title text */
  opacity: 0.85;
}

/* ===== EXTRA-SMALL TITLES + STATUS (MAIN LIST) ===== */
#main.with-toc .archive__item-title {
  font-size: 0.90rem !important;   /* was 1.0rem */
  line-height: 1.22;
  margin: 0 0 0.2rem;
  font-weight: 600;
}

#main.with-toc .pub__status {
  font-size: 0.60rem !important;   /* was ~0.66–0.70rem */
  padding: 0.08em 0.36em !important;
  line-height: 1;
}

/* ===== EXTRA-SMALL TOC (titles + numbers + pill) ===== */
#main.with-toc .toc--right {
  font-size: 0.68rem !important;   /* was ~0.74–0.78rem */
  line-height: 1.25;
}

#main.with-toc .toc__title-text {
  font-size: 1em !important;       /* inherit from .toc--right */
  font-weight: 600;
}

/* mini status pill in TOC */
#main.with-toc .pub__status--mini {
  font-size: 0.62em !important;    /* smaller, relative to TOC base */
  padding: 0.06em 0.34em !important;
  line-height: 1;
}

/* fallback: plain-text status in TOC */
#main.with-toc .toc__status {
  font-size: 0.85em !important;
  opacity: 0.85;
}

/* ----- Inline abstract toggle next to [...] ----- */
.archive__item-excerpt details.abs {
  display: inline;                 /* sit right after [...] */
}

/* style the "Show Full Abstract" summary like a blue link/button */
.archive__item-excerpt details.abs > summary {
  display: inline;
  cursor: pointer;
  color: #1a73e8;                  /* blue */
  font-weight: 600;
  margin-left: 0.35rem;            /* a little space after [...] */
  padding: 0 .1rem;
  border-radius: .2rem;
}

/* hover/focus feedback */
.archive__item-excerpt details.abs > summary:hover,
.archive__item-excerpt details.abs > summary:focus {
  color: #0b57d0;                  /* darker blue on hover */
  text-decoration: underline;
  outline: none;
}

/* remove the default disclosure triangle */
.archive__item-excerpt details.abs > summary::-webkit-details-marker { display: none; }
.archive__item-excerpt details.abs > summary::marker { content: ""; }

/* when opened, let the full text break onto a new line neatly */
.archive__item-excerpt details.abs[open] {
  display: block;                  /* moves content below the line with [...] */
  margin-top: .4rem;
}

/* optional: add a small top margin to the first paragraph inside */
.archive__item-excerpt details.abs[open] > p:first-of-type {
  margin-top: .25rem;
}
